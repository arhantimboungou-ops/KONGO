<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>KONGO MARKET â€“ Marketplace Africaine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
body { font-family:'Plus Jakarta Sans',sans-serif; background:#f8fafc }
.card { background:white; border-radius:24px; box-shadow:0 10px 30px rgba(0,0,0,.08); transition:.3s }
.card:hover { transform:translateY(-6px) }
</style>
</head>

<body>

<!-- NAV -->
<nav class="bg-white shadow sticky top-0 z-50">
<div class="max-w-7xl mx-auto px-4 h-20 flex justify-between items-center">
<h1 class="font-black text-xl">KONGO<span class="text-emerald-600">MARKET</span></h1>
<button onclick="openForm()" class="bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold">
<i class="fas fa-plus-circle mr-2"></i>Publier
</button>
</div>
</nav>

<!-- SEARCH -->
<header class="py-12 bg-white border-b">
<div class="max-w-3xl mx-auto px-4">
<input id="search" placeholder="TÃ©lÃ©phone, voiture, maison..."
class="w-full px-6 py-4 rounded-2xl bg-slate-100 font-bold outline-none">
</div>
</header>

<!-- ADS -->
<main class="max-w-7xl mx-auto px-4 py-12">
<div id="ads" class="grid sm:grid-cols-2 lg:grid-cols-4 gap-8"></div>
</main>

<!-- MODAL ADD -->
<div id="formModal" class="fixed inset-0 bg-black/60 hidden items-center justify-center z-50">
<div class="bg-white p-8 rounded-3xl w-full max-w-md">
<h2 class="font-black text-xl mb-4">Nouvelle annonce</h2>

<input id="title" placeholder="Titre" class="w-full mb-3 px-4 py-3 bg-slate-100 rounded-xl font-bold">
<input id="price" type="number" placeholder="Prix FCFA" class="w-full mb-3 px-4 py-3 bg-slate-100 rounded-xl font-bold">
<input id="phone" placeholder="WhatsApp (+243...)" class="w-full mb-3 px-4 py-3 bg-slate-100 rounded-xl font-bold">

<select id="country" class="w-full mb-3 px-4 py-3 bg-slate-100 rounded-xl font-bold">
<option>Congo</option><option>Nigeria</option><option>Ghana</option><option>Kenya</option>
<option>Senegal</option><option>Ivory Coast</option><option>South Africa</option>
<option>Morocco</option><option>Egypt</option><option>Cameroon</option>
</select>

<textarea id="desc" placeholder="Description" class="w-full mb-4 px-4 py-3 bg-slate-100 rounded-xl font-bold"></textarea>

<button onclick="publishAd()" class="w-full bg-emerald-600 text-white py-3 rounded-xl font-black">
Publier
</button>
</div>
</div>

<!-- MODAL DETAILS -->
<div id="detailModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50">
<div class="bg-white rounded-3xl max-w-lg w-full p-6">
<h3 id="dTitle" class="font-black text-2xl mb-2"></h3>
<p id="dPrice" class="text-emerald-600 font-black text-xl mb-3"></p>
<p id="dDesc" class="mb-4 text-slate-600"></p>
<a id="dContact" target="_blank"
class="block bg-emerald-600 text-white text-center py-3 rounded-xl font-black">
Contacter WhatsApp
</a>
</div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

/* ðŸ”¥ REMPLACE PAR TES INFOS FIREBASE ðŸ”¥ */
const firebaseConfig = {
apiKey: "API_KEY",
authDomain: "PROJECT.firebaseapp.com",
projectId: "PROJECT_ID",
storageBucket: "PROJECT.appspot.com",
appId: "APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

signInAnonymously(auth);

const adsRef = collection(db,"ads");

let ads=[];

onSnapshot(query(adsRef,orderBy("createdAt","desc")),snap=>{
ads=snap.docs.map(d=>({id:d.id,...d.data()}));
render();
});

window.publishAd=async()=>{
await addDoc(adsRef,{
title:title.value,
price:Number(price.value),
phone:phone.value,
country:country.value,
description:desc.value,
createdAt:serverTimestamp()
});
closeForm();
};

function render(){
const s=search.value.toLowerCase();
adsEl.innerHTML=ads.filter(a=>a.title.toLowerCase().includes(s)).map(a=>`
<div class="card p-5 cursor-pointer" onclick='openDetail(${JSON.stringify(a)})'>
<h4 class="font-bold mb-2">${a.title}</h4>
<p class="text-emerald-600 font-black">${a.price} FCFA</p>
<p class="text-xs text-slate-400">${a.country}</p>
</div>`).join("");
}

window.openDetail=(a)=>{
detailModal.classList.remove("hidden");
dTitle.textContent=a.title;
dPrice.textContent=a.price+" FCFA";
dDesc.textContent=a.description;
dContact.href="https://wa.me/"+a.phone.replace(/\D/g,"");
};

window.openForm=()=>formModal.classList.remove("hidden");
window.closeForm=()=>formModal.classList.add("hidden");
search.oninput=render;

</script>

</body>
</html>
